<div class="dist-container">
  <h2 style=" text-align: center;">Distributor Registration</h2>

<div class="grey-container">

  <div  class="form-grid">
   
    <div class="form-group">
      <label>Distributor Name<span class="required">*</span></label>
      <input type="text" [(ngModel)]="distributor.name" placeholder="Enter distributor name" />
    </div>   
 

    <div class="form-group">
      <label>Phone Number<span class="required">*</span></label>
      <input type="text" [(ngModel)]="distributor.phone" placeholder="Enter phone number"
             (input)="validatePhone()" maxlength="10" />
      <p *ngIf="phoneError" class="error-msg">Invalid phone number. Only 10 digits allowed.</p>
    </div>
    <div class="form-group">
      <label>Email<span class="required">*</span></label>
      <input type="email" [(ngModel)]="distributor.email" placeholder="Enter email"
             (input)="validateEmail()" />
      <p *ngIf="emailError" class="error-msg">Invalid email format.</p>
    </div>
  

  
    <div class="form-group">
      <label>Address Line 1<span class="required">*</span></label>
      <input type="text" [(ngModel)]="distributor.address1" placeholder="Address Line 1" />
    </div>

    <div class="form-group">
      <label>Address Line 2</label>
      <input type="text" [(ngModel)]="distributor.address2" placeholder="Address Line 2" />
    </div>
 <div class="form-group">
      <label>Address Line 3</label>
      <input type="text" [(ngModel)]="distributor.address3" placeholder="Address Line 3" />
    </div>
   
  
    <div class="form-group">
      <label for="state">State:<span class="required">*</span></label>
      <select class="dropdown" id="state" [(ngModel)]="selectedState" (ngModelChange)="onStateChange()">
        <option value="">-- Select State --</option>
        <option *ngFor="let state of states" [value]="state">{{ state }}</option>
      </select>
      
    </div>

   
    <div class="form-group">
      <label for="district">District:<span class="required">*</span></label>
      <select class="dropdown" id="district" [(ngModel)]="distributor.district">
        <option value="">-- Select District --</option>
        <option *ngFor="let district of districts" [value]="district">{{ district }}</option>
      </select>
    </div>

    <div class="form-group">
      <label>Pincode<span class="required">*</span></label>
      <input type="text" [(ngModel)]="distributor.pincode" placeholder="Enter pincode" maxlength="6" />
    </div>
  
  

    <div class="form-group">
      <label>PAN<span class="required">*</span></label>
      <input type="text" [(ngModel)]="distributor.pan" placeholder="Enter PAN" (input)="validatePAN()" maxlength="10" />
      <p *ngIf="panError" class="error-msg">Invalid PAN format. Should be e.g. ABCDE1234F</p>
    </div>

    <div class="form-group">
      <label>GSTIN<span class="required">*</span></label>
      <input type="text" [(ngModel)]="distributor.gstin" placeholder="Enter GSTIN" (input)="validateGSTIN()" maxlength="15" />
      <p *ngIf="gstinError" class="error-msg">Invalid GSTIN format.</p>
    </div>
   </div><!--closing of div grid   -->
   </div>
<br>
  <!-- Contact Persons -->

<div style="text-align:left; margin-bottom: -2px;
    margin-top: -15px;"><h2     style="text-align:left;">Contact Person Details</h2></div>
<div class="form-group-contact-person"  style="width: 102%;">
&nbsp;
 <!-- <label style="color: black; font-weight: 500;">Select</label> -->
 

  <label style="color: black; font-weight: 500;">Contact Person Name  </label>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

  <label style="color: black; font-weight: 500;">Designation  </label>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  
  <label style="color: black; font-weight: 500;">Email</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
 
  <label style="color: black; font-weight: 500;">Contact Number</label>

</div>



<div class="grey-container">
<div class="form-group-contact-person" *ngFor="let contact of distributor.contacts; let i = index" style="width: 100%;">
    <!-- <div class="form-group"> 
  <label>Contact Person Serial No.</label>
  <input type="text" [value]="i +1"  placeholder="Enter contact person" [disabled]="true" />
</div> -->

<!-- <div class="form-group"> -->
 <!-- <label>Select</label> -->
  <!-- <input type="checkbox" [(ngModel)]="contact.name" placeholder="Enter contact person" /> -->
  <!-- <input type="checkbox"  placeholder="Enter  person" /> -->
  <!-- </div> -->
<div class="form-group">

 

  <!-- <label>Contact Person Name</label> -->
  <input type="text" [(ngModel)]="contact.name" placeholder="Enter contact person" />

  </div>

  <div class="form-group">
  <!-- <label>Designation</label> -->
  <input type="text" [(ngModel)]="contact.designation" placeholder="Enter designation" />
</div>
<div class="form-group">
  <!-- <label>Email</label> -->
  <input type="text" [(ngModel)]="contact.email" placeholder="Enter email" />
</div>

<div class="form-group">
  <!-- <label>Contact Number</label> -->
  <input type="text" [(ngModel)]="contact.number" placeholder="Enter contact number" maxlength="10"/>
  </div>

<!-- <button type="button" class="add-btn" style="width: 55%;
    margin-left: 25%;" (click)="addContactPerson()">+ Add Contact Person</button> -->
   <!-- <div class="form-group"> -->
    <button type="button" class="submit-btn" style="background-color: #e53935;" (click)="removeContact(i)">x</button>
    </div>  
    </div>
  <!-- </div> -->
<!-- </div> -->
<!-- <div> -->
<!-- <div class="form-group"> -->
  <!-- <button type="button" class="submit-btn" style="background-color: #e53935;" (click)="removeContact(i)">Remove</button> -->
 <!-- <div class="button-end-page" style="display: flex; gap: 10px; justify-content: flex-start;"> -->
 <div class="button-end-page" style="text-align: right;" >

  
  <!-- <button type="button"  style="background-color: #e53935; 
    color: white;
    border: none;
    border-radius: 8px;
    padding: 7px 7px;
    font-weight: lighter;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.2s ease;" >Remove</button> -->
<button type="button"  style="background-color: #0066cc;
    color: white;
    border: none;
    border-radius: 8px;
     padding: 7px 7px;
    font-weight: lighter;
    font-size: 14px;
    cursor: pointer;
    transition: background-color 0.2s ease;" (click)="addContact()">Add Contact Row</button>
</div>


<!--   
  <div style="display: flex; "
   *ngFor="let contact of distributor.contacts; let i = index">
   
      <p style="font-weight: bold; size: 25px; color: #5e53fa; margin-top: 6px;">Person {{ i + 1 }}</p>
     

    <div class="form-group">
      <input type="text" [(ngModel)]="contact.name" placeholder="Enter contact person name" />
    </div>

    <div class="form-group">
      <input type="text" [(ngModel)]="contact.designation" placeholder="Enter designation" />
    </div>

    <div class="form-group">
      <input type="text" [(ngModel)]="contact.number" placeholder="Enter contact number" />
    </div>

      <button type="button" class="submit-btn" style="background-color: #e53935;" (click)="removeContact(i)">Remove</button>
  </div>

    <button type="button" class="submit-btn-add" (click)="addContact()" style="    width: 20%;
    margin-left: 39%;">Add Contact Person</button>
<br>
 -->
  <div style="margin-left: 33%; justify-content: center; width: 100%;">
<!-- <button class="submit-btn-save" (click)="save()" >Save </button> -->
<button class="btn success" (click)="save()" >Save </button>
  </div>
  

  <!-- Table -->
  <h3 *ngIf="registeredDistributors.length">Registered Distributors</h3>
  <table *ngIf="registeredDistributors.length" class="summary-table">
    <thead>
      <tr>
        <th>S.No</th>
        <th>Distributor Name</th>
        <th>GSTIN</th>
        <th>PAN</th>
        <th>Email</th>
        <th>Contact Person(s)</th>
        <th>Address</th>
        <th>Designation(s)</th>
        <th>Contact No(s)</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let dist of registeredDistributors; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ dist.name }}</td>
        <td>{{ dist.gstin }}</td>
        <td>{{ dist.pan }}</td>
        <td>{{ dist.email }}</td>
        <td><div *ngFor="let c of dist.contacts">{{ c.name }}</div></td>
        <td>{{ dist.address1 }} {{ dist.address2 }}</td>
        <td><div *ngFor="let c of dist.contacts">{{ c.designation }}</div></td>
        <td><div *ngFor="let c of dist.contacts">{{ c.number }}</div></td>
        
      </tr>

    </tbody>
  </table>
</div>
